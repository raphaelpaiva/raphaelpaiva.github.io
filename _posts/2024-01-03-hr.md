---
layout: post
title: O Gravador sem Cabe√ßa
date: 2024-01-03
---

## O Problema

* Eu tenho uma banda (üç™).
* N√≥s gostamos de nos gravar üåö, √°udio e v√≠deo.
* N√≥s temos uma mesa de som velha, com uma interface USB üéöÔ∏è.
* N√≥s temos um netbook velho de um n√∫cleo, 32bits üíª.
* N√≥s queremos eventualmente gravar multipista com uma interface adicional, ou juntando v√°rias pra fazer mixagens melhores üéõÔ∏è.
* N√≥s temos celulares pra gravar v√≠deos üìπ.
* Eu tenho um [aplicativo](https://github.com/raphaelpaiva/cameracontrol) que comanda c√¢meras de celulares (android, apenas) üì±.
* N√£o sabemos se vai funcionar pois o netbook √© bem antigo e lento. Sim, j√° quero inventar antes de testar.

Pois bem. Eu tenho um raspberry pi 3 sobrando üçì.

Qual √© o problema? Nenhum, eu quero inventar alguma coisa üòÑ.

## As id√©ia

A ideia principal √©: Um gravador port√°til, **simples de usar** (pluga a(s) interface(s) e aperta gravar). E por gravar, eu entendo:
1. Gravar √°udio das interfaces
2. Enviar o comando de grava√ß√£o para as c√¢meras

## Limita√ß√µes

Se n√£o me engano, temos [ALSA](https://www.alsa-project.org/) (um sistema de √°udio do linux) por padr√£o no [Raspberry Pi OS](https://www.raspberrypi.com/software/). D√° at√© pra agregar interfaces (pegar v√°rias e transformar em uma interface s√≥), mas tamb√©m d√° pra disparar v√°rios processos do [arecord](https://linux.die.net/man/1/arecord) (o programa gravador padr√£o do ALSA) pra gravar √°udio de interfaces diferentes ao mesmo tempo, que parece mais simples.

Bom, o raspberry pi n√£o tem tela, nem pretendo colocar. Bot√µes talvez sejam uma boa ideia, mas, pelo menos inicialmente, vou precisar de mais controle, at√© porque vou estar explorando, n√©?.

Se n√£o tem tela, n√£o tem interface gr√°fica. Daria at√© pra rodar um [Reaper](https://reaper.fm) e tentar fazer alguma m√°gica, mas acho que temos solu√ß√µes mais simples, pelo menos por enquanto. Provavelmente vou pelo caminho de interface web pra comandar por um celular ou tablet.

Pra acessar a interface web, eu vou precisar conectar no pi num ambiente potencialmente sem rede, ent√£o vou ter que sacrificar o wifi do Pi pra criar um hotspot onde o controlador vai conectar. N√£o √© muito diferente de como as interfaces digitais funcionam.

Para as c√¢meras tem o meu projeto citado acima, mas o mais importante √© o √°udio. Mais importante ainda √©:

> Dado um Raspberry Pi 3B com uma interface de √°udio conectada, eu consigo conectar diretamente nele via wifi com um tablet e enviar comandos pra gravar √°udio?

## Prot√≥tipo

Vamos l√°.

Tenho algumas coisas pra testar.

1. Consigo gravar de uma interface de √°udio usando arecord?
2. Consigo gravar de duas interfaces de √°udio simultaneamente usando arecord?
3. Consigo usar um servi√ßo web pra disparar a grava√ß√£o?
4. Consigo conectar e enviar os comandos acima diretamente no pi como um hotspot?

## M√£o na massa


